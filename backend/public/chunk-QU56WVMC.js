import{a as fe,c as be}from"./chunk-IJTMJMYD.js";import{b as pe}from"./chunk-MTGUTNBY.js";import{a as P}from"./chunk-32FL5DMP.js";import{a as ne,b as A,c as le,d as B,f as de,g as W,h as me}from"./chunk-UKZT5LYH.js";import{a as ee,b as te,c as ie,g as oe,h as I,i as re,j as ae,k as O}from"./chunk-4BQ3I3IV.js";import"./chunk-Q64FFBLU.js";import{a as se,c as ce,f as N}from"./chunk-2FMEKLYD.js";import{O as _,P as h}from"./chunk-ADHHZP6M.js";import{d as E}from"./chunk-ID222W6O.js";import"./chunk-I2VACIZO.js";import"./chunk-MDC4N2GR.js";import{b as q,d as z,f as H,g as J,j as Q,k as X,l as Y,m as Z,n as K,p as y}from"./chunk-PXIP7OAW.js";import"./chunk-OMQHCXRE.js";import{o as k,q as F}from"./chunk-FHMWGGDF.js";import{$b as U,Cb as c,Db as M,Eb as x,Fb as S,Gb as e,Hb as t,Ib as s,Kb as G,Ma as v,Nb as b,Pb as u,_b as i,ab as d,ac as V,bb as m,fa as w,fc as g,ka as f,lb as $,sb as p,ta as D,ua as L,xb as C}from"./chunk-LBNGVE6L.js";var R=class r{static \u0275fac=function(o){return new(o||r)};static \u0275cmp=f({type:r,selectors:[["app-website-kb-list"]],standalone:!0,features:[g],decls:40,vars:0,consts:[[1,"row","g-4"],[1,"col-12","col-md-8","col-lg-6"],[1,"col-12","col-md-8","col-lg-12"],[1,"table","table-striped","table-dark",2,"width","100%"],["scope","col"],["scope","row"]],template:function(o,a){o&1&&(e(0,"div",0)(1,"div",1)(2,"h2"),i(3,"List"),t()()(),e(4,"div",0)(5,"div",2)(6,"table",3)(7,"thead")(8,"tr")(9,"th",4),i(10,"#"),t(),e(11,"th",4),i(12,"Website Name"),t(),e(13,"th",4),i(14,"Remove"),t()()(),e(15,"tbody")(16,"tr")(17,"th",5),i(18,"1"),t(),e(19,"td"),i(20,"websiteName1.com"),t(),e(21,"td")(22,"mat-icon"),i(23,"delete_sweep"),t()()(),e(24,"tr")(25,"th",5),i(26,"2"),t(),e(27,"td"),i(28,"websiteName2.org"),t(),e(29,"td")(30,"mat-icon"),i(31,"delete_sweep"),t()()(),e(32,"tr")(33,"th",5),i(34,"3"),t(),e(35,"td"),i(36,"websiteName3.co.in"),t(),e(37,"td")(38,"mat-icon"),i(39,"delete_sweep"),t()()()()()()())},dependencies:[h,_],styles:["h1[_ngcontent-%COMP%]{font-size:2.2rem}h2[_ngcontent-%COMP%]{font-size:1.7rem}"]})};function xe(r,n){r&1&&(e(0,"mat-error"),i(1,"Website Name is required"),t())}function Se(r,n){r&1&&(e(0,"mat-error"),i(1,"URL is required"),t())}function ke(r,n){r&1&&(e(0,"mat-error"),i(1,"Enter a valid URL starting with http:// or https://"),t())}function Fe(r,n){if(r&1){let o=G();e(0,"button",16),b("click",function(){D(o);let l=u().$index,j=u();return L(j.removeUrlField(l))}),e(1,"mat-icon"),i(2,"remove_circle"),t()()}}function Ee(r,n){if(r&1&&(e(0,"div",10)(1,"mat-form-field",13)(2,"mat-label"),i(3),t(),s(4,"input",14),e(5,"mat-icon",6),i(6,"link"),t(),p(7,Se,2,0,"mat-error")(8,ke,2,0,"mat-error"),t(),p(9,Fe,3,0,"button",15),t()),r&2){let o=n.$implicit,a=n.$index,l=u();d(3),V("URL ",a+1,""),d(),C("formControlName",a),d(3),c(o.hasError("required")&&o.touched?7:-1),d(),c(o.hasError("pattern")&&o.touched?8:-1),d(),c(l.urls.length>1?9:-1)}}function Pe(r,n){r&1&&i(0," Add ")}function Ke(r,n){r&1&&(e(0,"div",12),s(1,"mat-spinner",17),e(2,"span"),i(3,"Connecting..."),t()())}var T=class r{constructor(n,o,a,l,j){this.fb=n;this.router=o;this.snackBar=a;this.authService=l;this.platformId=j;this.isBrowser=F(this.platformId),this.websiteKnowledgeForm=this.fb.group({website:["",[]],urls:this.fb.array([this.fb.control("",[])])})}dialogRef=w(fe);websiteKnowledgeForm;isBrowser;loading=!1;get urls(){return this.websiteKnowledgeForm.get("urls")}addUrlField(){this.urls.push(this.fb.control("",[]))}removeUrlField(n){this.urls.removeAt(n)}onCancel(){this.dialogRef.close()}onAdd(){this.websiteKnowledgeForm.valid&&(console.log("this.form.values : ",this.websiteKnowledgeForm),this.dialogRef.close(this.websiteKnowledgeForm))}static \u0275fac=function(o){return new(o||r)(m(K),m(E),m(W),m(P),m(v))};static \u0275cmp=f({type:r,selectors:[["app-add-website-kb"]],standalone:!0,features:[g],decls:27,vars:4,consts:[[1,"col-12","col-md-12","col-lg-12"],[1,"storage-card"],[2,"color","black"],[1,"d-flex","flex-column","gap-4",3,"ngSubmit","formGroup"],["appearance","outline"],["matInput","","formControlName","website","type","text","placeholder","Enter Website Name"],["matPrefix","",1,"me-2"],["formArrayName","urls",1,"urls-container"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],["type","button","mat-icon-button","","color","primary",3,"click"],[1,"url-field-container","d-flex","gap-2","align-items-start","mb-3"],["mat-flat-button","",1,"submit-button","py-3",3,"disabled"],[1,"d-flex","align-items-center","justify-content-center","gap-2"],["appearance","outline",1,"flex-grow-1"],["matInput","","type","url","placeholder","Enter URL (https://...)",3,"formControlName"],["type","button","mat-icon-button","","color","warn",1,"remove-btn"],["type","button","mat-icon-button","","color","warn",1,"remove-btn",3,"click"],["diameter","20"]],template:function(o,a){if(o&1&&(e(0,"div",0)(1,"mat-card",1)(2,"mat-card-content"),s(3,"br"),e(4,"h4",2),i(5,"Add Website"),t(),s(6,"br"),e(7,"form",3),b("ngSubmit",function(){return a.onAdd()}),e(8,"mat-form-field",4)(9,"mat-label"),i(10,"Website Name"),t(),s(11,"input",5),e(12,"mat-icon",6),i(13,"language"),t(),p(14,xe,2,0,"mat-error"),t(),e(15,"div",7)(16,"div",8)(17,"h5",2),i(18,"URLs"),t(),e(19,"button",9),b("click",function(){return a.addUrlField()}),e(20,"mat-icon"),i(21,"add_circle"),t()()(),x(22,Ee,10,5,"div",10,M),t(),e(24,"button",11),p(25,Pe,1,0)(26,Ke,4,0,"div",12),t()()()()()),o&2){let l;d(7),C("formGroup",a.websiteKnowledgeForm),d(7),c((l=a.websiteKnowledgeForm.get("website"))!=null&&l.hasError("required")&&((l=a.websiteKnowledgeForm.get("website"))!=null&&l.touched)?14:-1),d(8),S(a.urls.controls),d(2),C("disabled",a.websiteKnowledgeForm.invalid||a.loading),d(),c(a.loading?26:25)}},dependencies:[k,N,se,ce,h,_,y,Q,q,H,J,X,Z,Y,I,oe,ee,te,ie,A,ne,O,re,ae,B,le],styles:["[_nghost-%COMP%]{display:block}[_ngcontent-%COMP%]:is()   .mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}[_ngcontent-%COMP%]:is()   .mat-mdc-dialog-surface[_ngcontent-%COMP%]{background:#ffffff1a!important;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}[_ngcontent-%COMP%]:is()   [_ngcontent-%COMP%]:is(.mdc-text-field--outlined:not(.mdc-text-field--disabled)   .mdc-notched-outline__leading[_ngcontent-%COMP%], .mdc-text-field--outlined[_ngcontent-%COMP%]:not(.mdc-text-field--disabled)   .mdc-notched-outline__notch[_ngcontent-%COMP%], .mdc-text-field--outlined[_ngcontent-%COMP%]:not(.mdc-text-field--disabled)   .mdc-notched-outline__trailing)[_ngcontent-%COMP%]{border-color:#ffffff4d}[_ngcontent-%COMP%]:is()   .mat-mdc-form-field-focus-overlay[_ngcontent-%COMP%]{background-color:#ffffff1a}h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{font-size:1rem}.urls-container[_ngcontent-%COMP%]{background:#ffffff0d;border-radius:8px;padding:16px;border:1px solid rgba(255,255,255,.1)}mat-label[_ngcontent-%COMP%]{color:#fff}.submit-button[_ngcontent-%COMP%]{background:linear-gradient(to right,#00e1ff,#43ff8e);border:none}.submit-button[_ngcontent-%COMP%]:disabled{opacity:.6;background:#ffffff1a}.remove-btn[_ngcontent-%COMP%]{background:linear-gradient(to right,#ff4d6d,#ff758f);border:none}"]})};function ye(r,n){if(r&1&&(e(0,"tr")(1,"th",11),i(2),t(),e(3,"td"),i(4),t(),e(5,"td")(6,"mat-icon"),i(7,"delete_sweep"),t()()()),r&2){let o=n.$implicit,a=n.$index;d(2),U(a+1),d(2),U(o)}}function Ie(r,n){if(r&1&&(e(0,"div",5)(1,"div",8)(2,"table",9)(3,"thead")(4,"tr")(5,"th",10),i(6,"#"),t(),e(7,"th",10),i(8,"URL Name"),t(),e(9,"th",10),i(10,"Remove"),t()()(),e(11,"tbody"),x(12,ye,8,2,"tr",null,M),t()()()()),r&2){let o=u();d(12),S(o.previewUrls())}}var he=class r{constructor(n,o,a,l,j){this.fb=n;this.router=o;this.snackBar=a;this.authService=l;this.platformId=j;this.isBrowser=F(this.platformId),this.websiteKnowledgeForm=this.fb.group({website:["",[z.required]]})}websiteKnowledgeForm;hideSecret=!0;loading=!1;previewUrls=$([]);isBrowser;dialog=w(be);openDialog(){var n=this.dialog.open(T,{width:"450px",data:{startTime:"this.form.get(`${index}_2`).value "},panelClass:"custom-dialog-container",backdropClass:"custom-backdrop"});n.afterClosed().subscribe(o=>{if(o){console.log("result from dialog :",o);let a=o.controls.website.value,l=o.controls.urls.value;this.addWebsiteKb(a,l)}})}addWebsiteKb(n,o){console.log("domain and website list : ",n,o);let l=[...this.previewUrls()];n&&l.push(n),o.length>0&&l.push(...o),this.previewUrls.set(l),console.log("urls : ",this.previewUrls)}onSubmit(){this.websiteKnowledgeForm.valid?(this.loading=!0,this.authService.login(this.websiteKnowledgeForm.value),this.authService.login(this.websiteKnowledgeForm.value).subscribe({next:()=>this.router.navigate(["/talk"]),error:n=>{console.error("Login failed: ",n),this.loading=!1}})):this.websiteKnowledgeForm.markAllAsTouched()}static \u0275fac=function(o){return new(o||r)(m(K),m(E),m(W),m(P),m(v))};static \u0275cmp=f({type:r,selectors:[["app-website-knowledge-base"]],standalone:!0,features:[g],decls:12,vars:1,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12",2,"display","flex","justify-content","space-between"],[1,"mb-4"],[1,"btn","btn-primary","gradient-btn",2,"cursor","pointer","margin","2.5px","height","fit-content",3,"click"],[1,"row","mt-4"],[1,"row","g-4"],[1,"col-12","col-md-2","col-lg-3"],[1,"col-12","col-sm-12","col-md-12","col-lg-12","mb-4"],[1,"table","table-striped","table-dark",2,"width","100%"],["scope","col"],["scope","row"]],template:function(o,a){o&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),i(4,"Website Knowledge Base"),t(),e(5,"button",4),b("click",function(){return a.openDialog()}),i(6," +Add Website(s)"),t()()(),p(7,Ie,14,0,"div",5),e(8,"div",6),s(9,"div",7)(10,"div",7),t(),s(11,"app-website-kb-list"),t()),o&2&&(d(7),c(a.previewUrls().length>0?7:-1))},dependencies:[k,N,h,_,pe,y,I,A,O,de,B,me,R],styles:["[_nghost-%COMP%]{display:block;padding:24px;color:#fff}.storage-card[_ngcontent-%COMP%]{background:#ffffff1a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1);color:#fff}app-website-kb-list[_ngcontent-%COMP%]{background:#ffffff1a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);color:#fff}.text-muted[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{color:#fff!important}mat-card-header[_ngcontent-%COMP%]{margin-bottom:16px}mat-icon[_ngcontent-%COMP%]{color:#fff}mat-label[_ngcontent-%COMP%]{color:#fff}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{font-size:2rem}"]})};export{he as WebsiteKnowledgeBaseComponent};
