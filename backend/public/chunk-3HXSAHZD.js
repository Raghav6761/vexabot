import{a as A}from"./chunk-CVSUTZMM.js";import{b as ve}from"./chunk-4N7SC5UD.js";import{a as ge,c as he}from"./chunk-IJTMJMYD.js";import{b as _e}from"./chunk-MTGUTNBY.js";import{a as k}from"./chunk-32FL5DMP.js";import{a as ie,b as oe,c as le,d as de,f as me,g as M,h as ce}from"./chunk-UKZT5LYH.js";import{a as X,b as Y,c as Z,d as ee,g as te,h as re,i as ne,j as ae,k as se}from"./chunk-4BQ3I3IV.js";import"./chunk-Q64FFBLU.js";import{a as pe,c as ue,f as fe}from"./chunk-2FMEKLYD.js";import{O as B,P}from"./chunk-ADHHZP6M.js";import{d as I}from"./chunk-ID222W6O.js";import"./chunk-I2VACIZO.js";import"./chunk-MDC4N2GR.js";import{b as $,d as h,f as z,g as H,j as J,k as K,m as Q,n as y,p as W}from"./chunk-PXIP7OAW.js";import"./chunk-OMQHCXRE.js";import{o as V,q as w}from"./chunk-FHMWGGDF.js";import{$b as g,Cb as u,Cc as G,Eb as R,Fb as O,Gb as i,Hb as r,Ib as v,Kb as q,Ma as x,Nb as _,Pb as L,_b as a,ab as s,bb as m,fa as f,fc as S,ka as C,sb as U,ta as T,ua as N,xb as F}from"./chunk-LBNGVE6L.js";function we(o,n){o&1&&(i(0,"mat-error"),a(1,"Email is required"),r())}function Ie(o,n){o&1&&(i(0,"mat-error"),a(1,"Please enter a valid email"),r())}function ke(o,n){o&1&&(i(0,"mat-error"),a(1,"Email is required"),r())}function ye(o,n){o&1&&(i(0,"mat-error"),a(1,"Please enter a valid email"),r())}function Be(o,n){o&1&&(i(0,"mat-error"),a(1,"Password is required"),r())}function Pe(o,n){o&1&&(i(0,"mat-error"),a(1,"Password must be at least 6 characters"),r())}function Ae(o,n){o&1&&a(0," Create User ")}function De(o,n){o&1&&(i(0,"div",12),v(1,"mat-spinner",13),i(2,"span"),a(3,"Connecting..."),r()())}var D=class o{constructor(n,e,t,l,d){this.fb=n;this.router=e;this.snackBar=t;this.authService=l;this.platformId=d;this.isBrowser=w(this.platformId),this.addUserForm=this.fb.group({email:["",[h.required,h.email]],username:["",[h.required]],is_active:[!0,[h.required]],is_super_admin:[!1,[h.required]],client_id:[null],password:["",[h.required]]})}dialogRef=f(ge);addUserForm;hidePassword=!0;hideSecret=!0;loading=!1;isBrowser;onCancel(){this.dialogRef.close()}onAdd(){this.addUserForm.valid&&(console.log("this.form.value",this.addUserForm),this.dialogRef.close(this.addUserForm))}static \u0275fac=function(e){return new(e||o)(m(y),m(I),m(M),m(k),m(x))};static \u0275cmp=C({type:o,selectors:[["app-add-user"]],standalone:!0,features:[S],decls:32,vars:11,consts:[[1,"container-fluid"],[1,"row","g-4"],[1,"col-12","col-md-12","col-lg-12"],[1,"storage-card"],[1,"d-flex","flex-column","gap-4",3,"ngSubmit","formGroup"],["appearance","outline"],["matInput","","formControlName","email","type","email","placeholder","Enter User Email"],["matInput","","formControlName","username","type","text","placeholder","Enter User Name"],["matInput","","formControlName","password","placeholder","Enter your password",3,"type"],["matPrefix","",1,"me-2"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["mat-flat-button","",1,"submit-button","py-3","gradient-btn",3,"disabled"],[1,"d-flex","align-items-center","justify-content-center","gap-2"],["diameter","20"]],template:function(e,t){if(e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-card",3)(4,"mat-card-content")(5,"form",4),_("ngSubmit",function(){return t.onAdd()}),i(6,"mat-form-field",5)(7,"mat-label"),a(8,"User Email"),r(),v(9,"input",6),U(10,we,2,0,"mat-error")(11,Ie,2,0,"mat-error"),r(),i(12,"mat-form-field",5)(13,"mat-label"),a(14,"User Name"),r(),v(15,"input",7),U(16,ke,2,0,"mat-error")(17,ye,2,0,"mat-error"),r(),i(18,"mat-form-field",5)(19,"mat-label"),a(20,"Password"),r(),v(21,"input",8),i(22,"mat-icon",9),a(23,"lock"),r(),i(24,"button",10),_("click",function(){return t.hidePassword=!t.hidePassword}),i(25,"mat-icon"),a(26),r()(),U(27,Be,2,0,"mat-error")(28,Pe,2,0,"mat-error"),r(),i(29,"button",11),U(30,Ae,1,0)(31,De,4,0,"div",12),r()()()()()()()),e&2){let l,d,c,p,b,E;s(5),F("formGroup",t.addUserForm),s(5),u((l=t.addUserForm.get("email"))!=null&&l.hasError("required")&&((l=t.addUserForm.get("email"))!=null&&l.touched)?10:-1),s(),u((d=t.addUserForm.get("email"))!=null&&d.hasError("email")&&((d=t.addUserForm.get("email"))!=null&&d.touched)?11:-1),s(5),u((c=t.addUserForm.get("username"))!=null&&c.hasError("required")&&((c=t.addUserForm.get("username"))!=null&&c.touched)?16:-1),s(),u((p=t.addUserForm.get("email"))!=null&&p.hasError("email")&&((p=t.addUserForm.get("email"))!=null&&p.touched)?17:-1),s(4),F("type",t.hidePassword?"password":"text"),s(5),g(t.hidePassword?"visibility_off":"visibility"),s(),u((b=t.addUserForm.get("password"))!=null&&b.hasError("required")&&((b=t.addUserForm.get("password"))!=null&&b.touched)?27:-1),s(),u((E=t.addUserForm.get("password"))!=null&&E.hasError("minlength")&&((E=t.addUserForm.get("password"))!=null&&E.touched)?28:-1),s(),F("disabled",t.addUserForm.invalid||t.loading),s(),u(t.loading?31:30)}},dependencies:[V,fe,pe,ue,P,B,_e,W,J,$,z,H,K,Q,re,te,X,Y,Z,ee,oe,ie,se,ne,ae,me,de,le,ce,ve]})};var je=(o,n)=>n.id;function Te(o,n){if(o&1){let e=q();i(0,"tr")(1,"th",5),a(2),r(),i(3,"td"),a(4),r(),i(5,"td"),a(6),r(),i(7,"td"),a(8),r(),i(9,"td")(10,"mat-icon",6),_("click",function(){let l=T(e).$implicit,d=L();return N(d.deleteUser(l.id))}),a(11,"delete_sweep"),r()()()}if(o&2){let e=n.$implicit,t=n.$index;s(2),g(t+1),s(2),g(e.email),s(2),g(e.username),s(2),g(e.is_super_admin)}}function Ne(o,n){o&1&&(i(0,"tr")(1,"td",7),a(2,"No user found"),r()())}var j=class o{users;snackBar=f(M);dashboardService=f(A);constructor(){this.dashboardService.loadUsers(),this.users=this.dashboardService.users,G(()=>{let n=this.users();console.log("users list: ",n)})}deleteUser(n){confirm("Are you sure you want to delete this organization?")&&this.dashboardService.deleteUser(n).subscribe({next:()=>{this.snackBar.open("User deleted successfully","Close",{duration:3e3})},error:e=>{console.error("Error deleting organization:",e),this.snackBar.open("Error deleting organization","Close",{duration:3e3})}})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=C({type:o,selectors:[["app-users-list"]],standalone:!0,features:[S],decls:20,vars:1,consts:[[1,"container-fluid"],[1,"row","g-4"],[1,"col-12"],[1,"table","table-striped","table-dark",2,"width","100%"],["scope","col"],["scope","row"],[2,"cursor","pointer",3,"click"],["colspan","4",1,"text-center"]],template:function(e,t){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"table",3)(4,"thead")(5,"tr")(6,"th",4),a(7,"#"),r(),i(8,"th",4),a(9,"Email"),r(),i(10,"th",4),a(11,"Username"),r(),i(12,"th",4),a(13,"Super Admin"),r(),i(14,"th",4),a(15,"Remove"),r()()(),i(16,"tbody"),R(17,Te,12,4,"tr",null,je,!1,Ne,3,0,"tr"),r()()()()()),e&2&&(s(17),O(t.users().users))},dependencies:[P,B]})};var Se=class o{constructor(n,e,t,l,d,c){this.fb=n;this.router=e;this.snackBar=t;this.authService=l;this.dashboardService=d;this.platformId=c;this.isBrowser=w(this.platformId)}hideSecret=!0;loading=!1;isBrowser;dialog=f(he);openDialog(){var n=this.dialog.open(D,{width:"450px",panelClass:"custom-dialog-container",backdropClass:"custom-backdrop"});n.afterClosed().subscribe(e=>{if(e){let t=e.controls.email.value,l=e.controls.username.value,d=e.controls.is_active.value,c=e.controls.is_super_admin.value,p=e.controls.client_id.value,b=e.controls.password.value;console.log(e),this.addUser(t,l,d,c,p,b)}})}addUser(n,e,t,l,d,c){console.log("des : ",n,e,t,l,d,c),this.loading=!0,this.dashboardService.addUser(n,e,t,l,d,c).subscribe({next:()=>{this.snackBar.open("user added successfully","Close",{duration:3e3}),this.loading=!1},error:p=>{console.error("Error adding user:",p),this.snackBar.open("Error adding user","Close",{duration:3e3}),this.loading=!1}})}static \u0275fac=function(e){return new(e||o)(m(y),m(I),m(M),m(k),m(A),m(x))};static \u0275cmp=C({type:o,selectors:[["app-users"]],standalone:!0,features:[S],decls:8,vars:0,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12",2,"display","flex","justify-content","space-between"],[1,"mb-4"],[1,"btn","btn-primary","gradient-btn",2,"cursor","pointer","margin","2.5px","height","fit-content",3,"click"]],template:function(e,t){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),a(4,"Users"),r(),i(5,"button",4),_("click",function(){return t.openDialog()}),a(6," +Add User"),r()()(),v(7,"app-users-list"),r())},dependencies:[j],styles:["[_nghost-%COMP%]{display:block;padding:24px;color:#fff}.storage-card[_ngcontent-%COMP%]{background:#ffffff1a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1);color:#fff}.text-muted[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{color:#fff!important}mat-card-header[_ngcontent-%COMP%]{margin-bottom:16px}mat-icon[_ngcontent-%COMP%]{color:#fff}mat-label[_ngcontent-%COMP%]{color:#fff}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{font-size:2rem}"]})};export{Se as UsersComponent};
